{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "ECRPermissions",
      "Effect": "Allow",
      "Action": [
        "ecr:CreateRepository",
        "ecr:GetAuthorizationToken",
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer",
        "ecr:PutImage",
        "ecr:InitiateLayerUpload",
        "ecr:UploadLayerPart",
        "ecr:CompleteLayerUpload",
        "ecr:DescribeRepositories",
        "ecr:GetRepositoryPolicy",
        "ecr:ListImages"
      ],
      "Resource": "*"
    },
    {
      "Sid": "IAMPermissionsForAgentCoreRolesAndPolicies",
      "Effect": "Allow",
      "Action": [
        "iam:CreateRole",
        "iam:AttachRolePolicy",
        "iam:PutRolePolicy",
        "iam:GetRole",
        "iam:TagRole",
        "iam:CreatePolicy",
        "iam:GetPolicy",
        "iam:ListRolePolicies",
        "iam:ListAttachedRolePolicies"
      ],
      "Resource": [
        "arn:aws:iam::785697333220:role/AmazonBedrockAgentCoreSDKRuntime-*",
        "arn:aws:iam::785697333220:role/BedrockAgentCoreRuntimeExecutionRole-*",
        "arn:aws:iam::785697333220:role/AmazonBedrockAgentCoreSDKCodeBuild-*",
        "arn:aws:iam::785697333220:policy/BedrockAgentCoreRuntimeExecutionPolicy-*",
        "arn:aws:iam::785697333220:role/AmazonBedrockAgentCore*",
        "arn:aws:iam::785697333220:role/service-role/AmazonBedrockAgentCore*"
      ]
    },
    {
      "Sid": "PassRoleToCodeBuildOnly",
      "Effect": "Allow",
      "Action": "iam:PassRole",
      "Resource": [
        "arn:aws:iam::785697333220:role/AmazonBedrockAgentCoreSDKCodeBuild-*",
        "arn:aws:iam::785697333220:role/service-role/AmazonBedrockAgentCore*"
      ],
      "Condition": {
        "StringEquals": {
          "iam:PassedToService": "codebuild.amazonaws.com"
        }
      }
    },
    {
      "Sid": "PassRoleToBedrockAgentCore",
      "Effect": "Allow",
      "Action": "iam:PassRole",
      "Resource": [
        "arn:aws:iam::785697333220:role/AmazonBedrockAgentCoreSDKRuntime-*"
      ],
      "Condition": {
        "StringEquals": {
          "iam:PassedToService": "bedrock-agentcore.amazonaws.com"
        }
      }
    },
    {
      "Sid": "CodeBuildCreateProjectMustBeStar",
      "Effect": "Allow",
      "Action": [
        "codebuild:CreateProject"
      ],
      "Resource": "*"
    },
    {
      "Sid": "CodeBuildProjectAccessScoped",
      "Effect": "Allow",
      "Action": [
        "codebuild:DeleteProject",
        "codebuild:BatchGetBuilds",
        "codebuild:StartBuild",
        "codebuild:StopBuild",
        "codebuild:ListBuilds",
        "codebuild:ListBuildsForProject",
        "codebuild:GetProject",
        "codebuild:UpdateProject",
        "codebuild:BatchGetProjects"
      ],
      "Resource": [
        "arn:aws:codebuild:us-east-1:785697333220:project/bedrock-agentcore-*",
        "arn:aws:codebuild:us-east-1:785697333220:project/*-builder",
        "arn:aws:codebuild:us-east-1:785697333220:build/bedrock-agentcore-*"
      ]
    },
    {
      "Sid": "CodeBuildListAccess",
      "Effect": "Allow",
      "Action": [
        "codebuild:ListProjects"
      ],
      "Resource": "*"
    },
    {
      "Sid": "S3Permissions",
      "Effect": "Allow",
      "Action": [
        "s3:CreateBucket",
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::bedrock-agentcore-*",
        "arn:aws:s3:::bedrock-agentcore-*/*"
      ]
    },
    {
      "Sid": "LogsPermissions",
      "Effect": "Allow",
      "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
      ],
      "Resource": "arn:aws:logs:us-east-1:785697333220:log-group:/aws/codebuild/bedrock-agentcore-*"
    },
    {
      "Sid": "BedrockAgentCorePermissions",
      "Effect": "Allow",
      "Action": [
        "bedrock-agentcore:CreateAgentRuntime",
        "bedrock-agentcore:GetAgentRuntime",
        "bedrock-agentcore:UpdateAgentRuntime",
        "bedrock-agentcore:DeleteAgentRuntime",
        "bedrock-agentcore:ListAgentRuntimes",
        "bedrock-agentcore:InvokeAgentRuntime",
        "bedrock-agentcore-control:*"
      ],
      "Resource": "*"
    }
  ]
}
